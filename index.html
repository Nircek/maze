<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Nircek's Maze</title>
<meta name="description" content="Maze Game Project by Nircek">
<meta name="author" content="Nircek">
<style>
*{margin: 0;}
</style>
<script>
var canvas;
var ctx;
var WIDTH;
var HEIGHT;
var cb;

/*
// src: https://gist.github.com/Nircek/7e1ee37e0bbc30f7ab554c633209a8d4
// this is a script for generating mazes in Python, I wrote that because I don't feel good in JS and now I will rewrite that to JS
from random import random
from os import system
from msvcrt import getch
class Map:
  def __init__(self,W,H):
    self.W=W
    self.H=H
    self.X = -1
    self.Y = -1
    self.m = []
    for i in range(self.H):
      self.m += [[]]
      for j in range(self.W):
        self.m[i] += ['█']

  def view(self):
    for i in range(self.W+2):
      print('█',end='')
    print()
    for i in range(self.H):
      print('█',end='')
      for j in range(self.W):
        print(self.m[i][j],end='')
      print('█')
    for i in range(self.W+2):
      print('█',end='')
    print()

  def get(self,x,y):
    if x in range(self.W) and y in range(self.H):
      return self.m[x][y]
    else:
      return '█'

  def set(self,x,y,z):
    if x in range(self.W) and y in range(self.H):
      self.m[x][y] = z

  def randp(self):
    x = int(random()*self.H*self.W)
    y = x // self.W
    x %= self.W
    return x, y

  def gen(self,i=1):
    self.X, self.Y = m.randp()
    self.set(self.X,self.Y,' ')
    for i in range(i):
      x, y = self.randp()
      n = 0
      ni = 0
      for dx in [-1, 0, 1]:
        for dy in [-1, 0, 1]:
          if dx == 0 and dy == 0:
            continue
          if self.get(x+dx,y+dy) == ' ':
            n += 1
            if dx == 0 or dy == 0:
              ni += 1
      if ni == 1 and n < 3:
        self.set(x,y,' ')
*/

class CanvasButtons {
    constructor(canvas) {
        this.arr = [];
        this.ctx = canvas.getContext('2d');
        this.lx = -1;
        this.ly = -1;
        canvas.cbs = this;
        canvas.onclick = function(event) {
            // https://stackoverflow.com/a/5932203
            var totalOffsetX = 0;
            var totalOffsetY = 0;
            var canvasX = 0;
            var canvasY = 0;
            var currentElement = this;
            do{
                totalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft;
                totalOffsetY += currentElement.offsetTop - currentElement.scrollTop;
            }
            while(currentElement = currentElement.offsetParent);
            var cX = event.pageX - totalOffsetX;
            var cY = event.pageY - totalOffsetY;
            this.cbs.lx = cX;
            this.cbs.ly = cY;
            
            for(i = 0; i<this.cbs.arr.length; ++i)  // for each button in arr
                if(this.cbs.arr[i].x<=cX&&this.cbs.arr[i].cx>=cX&&
                   this.cbs.arr[i].y<=cY&&this.cbs.arr[i].cy>=cY)   // check is there was a click on this button
                    this.cbs.arr[i].f(cX-this.cbs.arr[i].x, cY-this.cbs.arr[i].y);  // if so, call function assigned to this button
        }
    }
    add(p, t, o={}, f=null){
        if(!o.hasOwnProperty('h'))o.h=30;   // height
        if(!o.hasOwnProperty('m'))o.m=5;    // margin
        if(!o.hasOwnProperty('c'))o.c='black';  // color
        if(!o.hasOwnProperty('c'))o.b=true; // border
        // fill with default values
        this.ctx.font = o.h+'px fantasy';
        this.ctx.strokeStyle = o.c;
        var w = this.ctx.measureText(t).width;
        if(o.b)
            this.ctx.strokeRect(p.x-w/2-o.m, p.y-o.h/2-o.m, w+o.m*2, o.h+o.m*2);
        this.ctx.strokeText(t, p.x-w/2, p.y+o.h/4);
        if(f!=null){
            var n = {x:p.x-w/2-o.m, y:p.y-o.h/2-o.m, w:w+o.m*2, h:o.h+o.m*2, f:f};
            n.cx = n.x+n.w;
            n.cy = n.y+n.h;
            this.arr.push(n);
        }
    }
}


function init() {
    canvas = document.getElementById('canvas');
    ctx = canvas.getContext('2d');
    WIDTH = document.body.scrollWidth;
    HEIGHT = Math.floor(window.innerHeight-Math.PI);
    canvas.width = WIDTH;
    canvas.height = HEIGHT;
    ctx.strokeStyle = '#ff1aff';
    for(i=3; i<5; ++i)
        ctx.strokeRect(i,i,WIDTH-2*i,HEIGHT-2*i);
    cb = new CanvasButtons(canvas);
    
    cb.add({x:WIDTH/2,y:HEIGHT/2},'Start new game', {b:false}, function(a,b){alert(a+' '+b);});
}
</script>
</head>
<body onload="init()">
<canvas id="canvas" width="0" height="0"></canvas>
</body>
</html>
